 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Get Contacts (Button Only)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<div class="container text-center">
  <button id="getContactsBtn" class="btn btn-primary btn-lg">Allow & Get Contacts</button>

  <div id="contactsResult" class="mt-4"></div>
</div>

<script>
  const getContactsBtn = document.getElementById('getContactsBtn');
  const contactsResult = document.getElementById('contactsResult');

  getContactsBtn.addEventListener('click', async () => {
    if ('contacts' in navigator && 'ContactsManager' in window) {
      try {
        const props = ['name', 'tel']; // we only want name and phone numbers
        const opts = { multiple: true };
        const contacts = await navigator.contacts.select(props, opts);

        if (contacts.length === 0) {
          contactsResult.innerHTML = '<p>No contacts selected.</p>';
          return;
        }

        let html = '<h4>Selected Numbers:</h4><ul class="list-group">';
        contacts.forEach(contact => {
          html += `<li class="list-group-item">${contact.name} - ${contact.tel ? contact.tel.join(', ') : 'No number'}</li>`;
        });
        html += '</ul>';

        contactsResult.innerHTML = html;

      } catch (error) {
        console.error(error);
        contactsResult.innerHTML = '<p class="text-danger">Permission denied or error fetching contacts.</p>';
      }
    } else {
      alert('Contacts Picker API is not supported on this device.');
    }
  });
</script>

</body>
</html>
